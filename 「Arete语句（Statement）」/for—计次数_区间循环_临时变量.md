# ğŸ” for â€” è®¡æ¬¡æ•° / åŒºé—´å¾ªç¯ / ä¸´æ—¶å˜é‡

> [ğŸ  é¦–é¡µ](/) | [ğŸ“š è¯­å¥æ€»è§ˆ](index.md) | **åŸºç¡€æ§åˆ¶** | [â† ğŸ§  ifchain](ifchainâ€”å¤šåˆ†æ”¯æ¡ä»¶æ‰§è¡Œ_caseâ€¦elseé“¾.md) | [ğŸ² random â†’](randomâ€”æŒ‰æƒé‡éšæœºæ‰§è¡Œä¸€ä¸ªå­å—.md)

---

## ğŸ“– åŠŸèƒ½ç®€ä»‹

`for` ç”¨æ¥**é‡å¤æ‰§è¡Œå­è¯­å¥å—**ï¼šæ—¢æ”¯æŒ"æ‰§è¡Œ N æ¬¡"çš„ç®€å•å¾ªç¯ï¼Œä¹Ÿæ”¯æŒ `[fromâ€¦to]`ï¼ˆå«ç«¯ç‚¹ï¼‰çš„**æ•°å€¼åŒºé—´å¾ªç¯**ï¼Œå¹¶å¯æŠŠå½“å‰å¾ªç¯è®¡æ•°/æ•°å€¼ä¿å­˜åˆ°ä¸´æ—¶å˜é‡é‡Œç»™å­è¯­å¥ä½¿ç”¨ã€‚

---

## âš™ï¸ è¯­æ³•

### æ–¹å¼ä¸€ï¼šæŒ‰æ¬¡æ•°ï¼ˆ`times`/`count`ï¼‰

```yaml
for { times = 5; var = "i" } {
  # å¾ªç¯ä½“ï¼›i ä¾æ¬¡ä¸º 0,1,2,3,4
}
```

ç­‰ä»·å†™æ³•ï¼š

```yaml
for { count = 5; as = "i" } { ... }
```

### æ–¹å¼äºŒï¼šæŒ‰åŒºé—´ï¼ˆ`from`/`to`/`step`ï¼‰

```yaml
for { from = 0; to = 10; step = 2; var = "i" } {
  # i = 0,2,4,6,8,10
}
```

**ç‰¹æ€§è¯´æ˜ï¼š**
- **é€’å¢**ï¼š`from <= to` æ—¶é»˜è®¤ `step = 1`
- **é€’å‡**ï¼š`from > to` æ—¶é»˜è®¤ `step = -1`
- **å«ç«¯ç‚¹**ï¼šåˆ°è¾¾ `to` ä¼šæ‰§è¡Œï¼ˆæµ®ç‚¹å®¹å·® 1e-9ï¼‰

!> **å®‰å…¨è§„åˆ™**ï¼š`step = 0` ä¼šè¢«å¿½ç•¥ï¼ˆä¸å¾ªç¯ï¼‰ï¼›è‹¥ `step` ç¬¦å·ä¸æ–¹å‘ä¸åŒ¹é…åˆ™ç›´æ¥ä¸æ‰§è¡Œã€‚

---

## ğŸ”¢ å‚æ•°è¯´æ˜

| é”® | ç±»å‹ | è¯´æ˜ |
| --- | --- | --- |
| `times` / `count` | Int | æ‰§è¡Œæ¬¡æ•°ï¼›å½“æä¾›å®ƒä»¬æ—¶ï¼Œä¼šå¿½ç•¥ `from/to/step`ï¼Œå†…éƒ¨æŒ‰ `0..(n-1)` è¿­ä»£ |
| `from` | Double | èµ·å§‹å€¼ï¼ˆé»˜è®¤ `0`ï¼‰ |
| `to` | Double | ç»“æŸå€¼ï¼ˆé»˜è®¤ç­‰äº `from`ï¼Œå³åªæ‰§è¡Œä¸€æ¬¡ï¼‰ |
| `step` | Double | æ­¥é•¿ï¼ˆé»˜è®¤æŒ‰æ–¹å‘å– `Â±1`ï¼›ä¸º `0` æ—¶ä¼šè¢«çº æ­£ä¸º `Â±1`ï¼‰ |
| `var` / `as` | String | å°†å½“å‰è®¡æ•°/æ•°å€¼å†™å…¥ `ctx.vars[var]`ï¼Œä¾›å­è¯­å¥å¼•ç”¨ï¼ˆå¦‚ `${i}`ï¼‰ |

### å˜é‡è¡Œä¸º

- æ¯æ¬¡å¾ªç¯å‰å†™å…¥ `ctx.vars[var]`ï¼›æ•°å€¼è‹¥æ¥è¿‘æ•´æ•°ä¼šè‡ªåŠ¨è½¬ä¸º **Int/Long**ï¼ˆå¦åˆ™ä¿ç•™ Doubleï¼‰
- å¾ªç¯ç»“æŸåä¼š**è¿˜åŸ/åˆ é™¤**è¿™ä¸ªå˜é‡ï¼š
  - å¦‚æœä¹‹å‰å­˜åœ¨ï¼Œä¼šè¿˜åŸæˆæ—§å€¼
  - å¦‚æœä¹‹å‰ä¸å­˜åœ¨ï¼Œä¼šä» `ctx.vars` ç§»é™¤

---

## âš¡ å®ç”¨ç¤ºä¾‹

### â‘  æ‰§è¡Œ 5 æ¬¡ï¼Œå±•ç¤ºè®¡æ•°

```yaml
for { times = 5; var = "i" } {
  message { text = "&7ç¬¬ ${i} æ¬¡é‡Šæ”¾ç²’å­" }
  particle { type = "crit" at = "@self" }
}
```

### â‘¡ é€’å¢ä½ç§»ï¼ˆè¿è´¯å†²åˆºæ„Ÿï¼‰

```yaml
for { from = 0; to = 0.8; step = 0.2; var = "t" } {
  # æ¯æ¬¡è½»å¾®å åŠ å‰è¿›é€Ÿåº¦
  velocity { x = 0 y = 0 z = 0.2 add = true }
  delay 1
}
```

### â‘¢ ç¯å½¢å‡»é€€ï¼ˆç”¨è®¡æ•°é©±åŠ¨å¤šæ¬¡ knockbackï¼‰

```yaml
target-entity { center = "@self" radius = 4 type = "living" includeSelf = false storeList = "victims" }

for { times = 3; var = "round" } {
  knockback { targetVar = "victims" s = 0.6 y = 0.22 }
  sound { key = "entity.player.attack.knockback" v = 1 p = 1 at = "@self" }
  delay 2
}
```

### â‘£ é€’å‡å¾ªç¯ï¼ˆå€’è®¡æ—¶ï¼‰

```yaml
for { from = 3; to = 1; step = -1; var = "sec" } {
  title { text = "&e${sec}" }
  delay 20
}
message { text = "&aGo!" }
```

### â‘¤ ç»“åˆ `ifchain` åšåˆ†æ®µç‰¹æ•ˆ

```yaml
for { from = 1; to = 5; var = "i" } {
  ifchain {
    case { cond = "var.i <= 2" } { particle { type = "flame" at = "@self" } }
    case { cond = "var.i <= 4" } { particle { type = "spell" at = "@self" } }
    else { particle { type = "explosion" at = "@self" } }
  }
  delay 2
}
```

---

## ğŸ’¡ ä½¿ç”¨å»ºè®®

?> **é…åˆ `delay` å¯ä»¥åˆ›å»ºè¿ç»­çš„åŠ¨ç”»æ•ˆæœ**

?> **å¾ªç¯å˜é‡è‡ªåŠ¨æ¸…ç†ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä¸Šä¸‹æ–‡**

?> **æ”¯æŒæµ®ç‚¹æ•°æ­¥é•¿ï¼Œå¯ä»¥å®ç°å¹³æ»‘çš„æ•°å€¼å˜åŒ–**

---

## âš ï¸ æ³¨æ„äº‹é¡¹

!> **é¿å…è¿‡å¤§çš„å¾ªç¯æ¬¡æ•°ï¼Œå¯èƒ½å½±å“æœåŠ¡å™¨æ€§èƒ½**  
å»ºè®®å•æ¬¡å¾ªç¯ä¸è¶…è¿‡ 100 æ¬¡ï¼Œé…åˆ `delay` åˆ†å¸§æ‰§è¡Œ

!> **å¾ªç¯å˜é‡åœ¨å¾ªç¯ç»“æŸåä¼šè¢«ç§»é™¤æˆ–è¿˜åŸ**  
å¦‚éœ€ä¿ç•™ç»“æœï¼Œè¯·åœ¨å¾ªç¯å†…èµ‹å€¼ç»™å…¶ä»–å˜é‡

---

## ğŸ”— ç›¸å…³è¯­å¥

- [â³ delay - å»¶è¿Ÿæ‰§è¡Œ](â³delayâ€”å»¶è¿Ÿæ‰§è¡Œåç»­è¯­å¥.md) - é…åˆå®ç°åˆ†å¸§åŠ¨ç”»
- [ğŸ§  ifchain - å¤šåˆ†æ”¯æ¡ä»¶](ifchainâ€”å¤šåˆ†æ”¯æ¡ä»¶æ‰§è¡Œ_caseâ€¦elseé“¾.md) - åœ¨å¾ªç¯ä¸­ä½¿ç”¨æ¡ä»¶åˆ¤æ–­
- [ğŸŒŒ particle - ç²’å­ç‰¹æ•ˆ](particleâ€”ç²’å­ç‰¹æ•ˆè¯­å¥.md) - åˆ›å»ºå¾ªç¯ç²’å­æ•ˆæœ

---

<div style="text-align: center; padding: 20px 0; color: #999; font-size: 12px; border-top: 1px solid #eee; margin-top: 50px;">
  <p>ğŸ“ æ›´æ–°æ—¶é—´: 2025-10-17 14:49:31</p>
</div>
